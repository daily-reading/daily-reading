### 为什么要做分布式链路追踪系统？
在引入微服务架构之后，一个请求的调用需要跨越多个进程，在排查问题时需要有一个东西能将整个请求的上下文串联起来。
### Netfix 的链路追踪架构
![2bf6b6156c3a33a79a8555f73e910879.jpeg](evernotecid://7F01B206-A616-4EA4-AABF-0C5FA9B75355/appyinxiangcom/26825047/ENNote/p141?hash=2bf6b6156c3a33a79a8555f73e910879)

### 设计链路追踪系统是需要面临的几个问题
* 如何接入服务
    * 需要对服务本身影响较小
* 如何传递请求上下文
    * Open-Zipkin’s B3 HTTP header
* 如何采集
    * 默认按照比例采样，可配置全部采样
* 如何处理采集的信息
    * 选择 MANTIS 作为数据处理平台
* 如何存储采集的信息
    * 前期使用  Elastic Block Store (EBS)
    * 后面改成了Cassandra
* 为什么会在存储层有这样的改动？
    * 两个存储对于读写场景的适应性不同，链路追踪这个场景写多读少。
    * Cassandra 更加利于成本控制
